generator client {
  provider = "prisma-client"
  output   = "../src/shared/lib/prisma/generated"
}

datasource db {
  provider = "postgresql"
}

model User {
  id            String          @id @default(uuid())
  dailyGoals    DailyGoal[]     @relation("daily_goal")
  dailyProgress DailyProgress[] @relation("daily_progress")
  workIntervals WorkInterval[]  @relation("work_interval")
  settings      UserSetting[]   @relation("user_setting")

  @@map("user")
}

model WorkInterval {
  id        String    @id @default(uuid())
  startTime DateTime  @map("start_time") @db.Timestamptz
  endTime   DateTime? @map("end_time") @db.Timestamptz
  duration  Int
  state     String    @default("active")
  userId    String    @map("user_id")
  user      User      @relation("work_interval", fields: [userId], references: [id])

  @@map("work_interval")
}

model DailyGoal {
  id          String   @id @default(uuid())
  date        DateTime @unique @db.Timestamptz
  goalMinutes Int      @map("goal_minutes")
  userId      String   @map("user_id")
  user        User     @relation("daily_goal", fields: [userId], references: [id])

  @@map("daily_goal")
}

model DailyProgress {
  id           String   @id @default(uuid())
  date         DateTime @unique @db.Timestamptz
  totalMinutes Int      @map("total_minutes")
  userId       String   @map("user_id")
  user         User     @relation("daily_progress", fields: [userId], references: [id])

  @@map("daily_progress")
}

model UserSetting {
  id     String @id @default(uuid())
  name   String
  value  String
  userId String @unique @map("user_id")
  user   User   @relation("user_setting", fields: [userId], references: [id])

  @@map("user_setting")
}
